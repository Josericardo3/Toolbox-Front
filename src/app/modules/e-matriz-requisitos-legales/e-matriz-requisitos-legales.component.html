<app-app-header></app-app-header>
<div class="MainContainerMatrizRequisitosLegales">
<div class="tituloP">
    <h1>Matriz de requisitos legales</h1>
    <app-app-header-arrow-left class="arrow"></app-app-header-arrow-left>
</div>
<!-- <div class="reporte">
    <button type="button" class="btnReporte" (click)="showModal = true">Resumen</button>
</div> -->



<input type="text" [(ngModel)]="busqueda" (input)="buscarTitulos()" placeholder="Buscar..." class="buscador">
  <div class="containerTabs">
    <div class="tabs">
        <div class="tab" (click)="disabledTabs1 ? null : cambiarTab('tab1')" [ngClass]="{ 'active': tabActual === 'tab1','bloqueado': disabledTabs1 }" [attr.disabled]="disabledTabs1 ? 'disabled' : null">Turismo</div>
        <div class="tab" (click)="disabledTabs2 ? null : cambiarTab('tab2')" [ngClass]="{ 'active': tabActual === 'tab2','bloqueado': disabledTabs2 }" [attr.disabled]="disabledTabs2 ? 'disabled' : null">Ambiental</div>
        <div class="tab" (click)="disabledTabs3 ? null : cambiarTab('tab3')" [ngClass]="{ 'active': tabActual === 'tab3','bloqueado': disabledTabs3 }" [attr.disabled]="disabledTabs3 ? 'disabled' : null">Laboral SGSST</div>
        <div class="tab" (click)="disabledTabs4 ? null : cambiarTab('tab4')" [ngClass]="{ 'active': tabActual === 'tab4','bloqueado': disabledTabs4 }" [attr.disabled]="disabledTabs4 ? 'disabled' : null">Social</div>
        <div class="tab" (click)="disabledTabs5 ? null : cambiarTab('tab5')" [ngClass]="{ 'active': tabActual === 'tab5','bloqueado': disabledTabs5 }" [attr.disabled]="disabledTabs5 ? 'disabled' : null">Económico</div>
        <div class="tab" (click)="disabledTabs6 ? null : cambiarTab('tab6')" [ngClass]="{ 'active': tabActual === 'tab6','bloqueado': disabledTabs6 }" [attr.disabled]="disabledTabs6 ? 'disabled' : null">Particular de Norma</div>
    </div>
    <div [ngSwitch]="tabActual" class="contenidoTabs">
        <div *ngSwitchCase="'tab1'">
            <div class="containerTabActual">              
                <div class="reporte">
                    <button type="button" class="btnModificar" (click)="modificarBloquearCampos()" *ngIf="disabledModificar==false && getRolValue() !== 4 && getRolValue()!==5 && getRolValue()!==7">Modificar Reporte</button>
                    <button type="button" class="btnModificar" (click)="terminarModificarCampos()" *ngIf="disabledModificar==true">Terminar Modificación</button>
                    <button type="button" class="btnReporte" (click)="generateReporteTurismo()" [attr.disabled]="disabledModificar ? 'disabled' : null">Descargar reporte</button>
                </div>
                
                
                <div class="div" *ngFor="let campo of leyesTurismo; let i = index">
                    <div class="titulo" (click)="toggleSectionLey('primeraLey', i, campo.ID_MATRIZ)" [ngClass]="{'verde': isLeyVisible(i)}">
                        <div class="h3">
                            <h3>{{ campo.TIPO_NORMATIVIDAD }} {{ campo.NUMERO }} de {{ campo.ANIO }}</h3> 
                        </div>    
                        <div class="iconos">
                            <i class="fa-solid" [class.fa-angle-up]="isLeyVisible(i)" [class.fa-angle-down]="!isLeyVisible(i)"></i>
                        </div>
                    </div>
                    <div class="detalle" *ngIf="isLeyVisible(i)">
                        <ng-container *ngFor="let subCampo of campo.subLeyes; let j = index">
                            <div class="subdetalle">
                                <h2>Emitida por:</h2>
                                <p class="parrafo">{{campo.DESCRIPCION}}</p>
                                <h4 style="font-weight: bolder;" class="parrafo">ARTÍCULOS / SECCIONES / REQUISITOS ESPECÍFICOS QUE APLICAN</h4>
                                <p class="parrafo">{{ subCampo.DOCS_ESPECIFICOS}}</p>
                                <app-app-formulario [selectedMatrizId]="subCampo.ID_MATRIZ" [data]="subCampo" [idMatriz]="idMatriz" [showBotones]="disabledModificar"></app-app-formulario>
                                
                            </div>
                        </ng-container>
                    </div>
                </div>
                
                <div *ngIf="divsVisible">
                    <div class="div" id="divAdd" *ngFor="let div of divsTab1; let i = index">
                        <div *ngIf = "div.DESCRIPCION || div.SECCIONES || div.NUMERO || div.ANIO || div.TIPO_NORMATIVIDAD">
                                <div class="titulo" (click)="toggleSectionDivAdd('divAdd', i)" [ngClass]="{'verde': isDivAddVisible(i)}">
                                    <div class="h3">
                                        <h3 id="tituloNormativa">{{div.TIPO_NORMATIVIDAD !== 'otro' ? div.TIPO_NORMATIVIDAD : otroValor}} {{div.NUMERO}} de {{div.ANIO}}</h3> 
                                    </div> 
                                    <i class="fa-solid" [class.fa-angle-up]="isDivAddVisible(i)" [class.fa-angle-down]="!isDivAddVisible(i)"></i>
                                    <button (click)="eliminarDivAdd()" class="boton-eliminar">x</button>
                                </div>
                                <div class="detalle" id="detalleAdd" *ngIf="isDivAddVisible(i)">       
                                    <h2>Emitida por:</h2>
                                    <p class="parrafo">Por la cual se expide la Ley General de Turismo y se dictan otras disposiciones</p>
                                    <h4 style="font-weight: bolder;" class="parrafo">ARTÍCULOS / SECCIONES / REQUISITOS ESPECÍFICOS QUE APLICAN</h4>
                                    <p class="parrafo">{{ div.DESCRIPCION }}</p>
                                    <p class="parrafo">{{ div.SECCIONES }}</p>
                                    <app-app-formulario></app-app-formulario> 
                                </div> 
                        </div>  
                    </div>
                </div>
                
                  
                <ng-template #inputTemplate>
                    <div>
                      <input type="text" [(ngModel)]="nuevoDiv.anio">
                      <input type="text" [(ngModel)]="nuevoDiv.numero">
                      <textarea [(ngModel)]="nuevoDiv.descripcion"></textarea>
                      <textarea [(ngModel)]="nuevoDiv.secciones"></textarea>
                      <input type="text" [(ngModel)]="nuevoDiv.tipoNormatividad">
                    </div>
                </ng-template>

                <div id="ContainerdetalleAdicionar">
                    <div class="adicionar" (click)="toggleSection('adicionarTurismo')" *ngIf="getRolValue() !== 4 && getRolValue()!==5 && getRolValue()!==7" >
                        <button class="adicionarBtn" id="adicionarRequisitoTurismo" [disabled]="disabledModificar==true">Adicionar requisito legal +</button>
                    </div>
                    <div class="detalleAdicionar" id="detalleAdicionarRequisito" *ngIf="adicionarVisibleTurismo">
                        <form [formGroup]="tab1Form" >

                            <label class="adicionarLabel">Categoría</label>
                            <input type="text" class="adicionarInput" id="categoriaInput" formControlName="categoria" value ="Turismo" readonly appLetras> 

                            <label class="adicionarLabel">Tipo de normatividad</label>
                            <select class="adicionarInput" id="tipoNormatividadSelect" #selectOption (change)="onSelect(selectOption.value)"
                            formControlName="tipoNormatividad">
                                <option value="" disabled selected hidden>Seleccione una opción</option>
                                <option value="Ley">Ley</option>
                                <option value="Decreto">Decreto</option>
                                <option value="Decreto Ley">Decreto Ley</option>
                                <option value="otro">Otro</option>
                            </select>
                            <div *ngIf="selectedOption === 'otro'" class="changeOtro">
                                <label class="adicionarLabel">Otro ¿Cuál?</label>
                                <input type="text" class="adicionarInput" id="otroInput" (input)="onOtroInputChange($event)" appLetras>
                            </div>
                                                            
                            <label class="adicionarLabel">Número</label>
                            <input type="number" class="adicionarInput" id="numeroInput" formControlName="numero" appNumeros> 
                                
                            <label class="adicionarLabel">Año</label>
                            <input type="number" class="adicionarInput" id="anioInput" maxlength="4" formControlName="anio" appNumeros>
                                
                            <label class="adicionarLabel">Descripción</label>
                            <textarea style="height: 100px" class="adicionarInput" id="descripcionTextAreaAdd" formControlName="descripcion"></textarea>
                                
                            <label class="adicionarLabel">Artículos / Secciones / Requisitos específicos que aplican</label>
                            <textarea style="height: 100px" class="adicionarInput" id="seccionesTextAreaAdd" formControlName="secciones"></textarea>
                                
                            <button type="submit" class="btnAdd" (click)="agregarDiv()" [disabled]="tab1Form.invalid">Agregar</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        
        <div *ngSwitchCase="'tab2'">    
            <div class="containerTabActual">
                <div class="reporte">
                    <div class="reporte">
                        <button type="button" class="btnModificar" (click)="modificarBloquearCampos()" *ngIf="disabledModificar==false && getRolValue() !== 4 && getRolValue()!==5 && getRolValue()!==7">Modificar Reporte</button>
                        <button type="button" class="btnModificar" (click)="terminarModificarCampos()" *ngIf="disabledModificar==true">Terminar Modificación</button>
                        <button type="button" class="btnReporte" (click)="generateReporteAmbiental()" [attr.disabled]="disabledModificar ? 'disabled' : null">Descargar reporte</button>
                    </div>
                </div>
                <div class="div" *ngFor="let campo of leyesAmbiental; let i = index">
                    <div class="titulo" (click)="toggleSectionLey('primeraLey', i, campo.ID_MATRIZ)" [ngClass]="{'verde': isLeyVisible(i)}">
                        <div class="h3">
                            <h3>{{ campo.TIPO_NORMATIVIDAD }} {{ campo.NUMERO }} de {{ campo.ANIO }}</h3> 
                        </div>    
                        <div class="iconos">
                            <i class="fa-solid" [class.fa-angle-up]="isLeyVisible(i)" [class.fa-angle-down]="!isLeyVisible(i)"></i>
                        </div>
                    </div>
                    <div class="detalle" *ngIf="isLeyVisible(i)">
                        <ng-container *ngFor="let subCampo of campo.subLeyes; let j = index">
                            <div class="subdetalle">
                                <h2>Emitida por:</h2>
                                <p class="parrafo">{{campo.DESCRIPCION}}</p>
                                <h4 style="font-weight: bolder;" class="parrafo">ARTÍCULOS / SECCIONES / REQUISITOS ESPECÍFICOS QUE APLICAN</h4>
                                <p class="parrafo">{{ subCampo.DOCS_ESPECIFICOS}}</p>
                                <app-app-formulario [selectedMatrizId]="subCampo.ID_MATRIZ" [data]="subCampo" [idMatriz]="idMatriz" [showBotones]="disabledModificar"></app-app-formulario>
                            </div>
                        </ng-container>       
                    </div>
                </div>
                
                <div *ngIf="divsVisible">
                    <div class="div" id="divAdd" *ngFor="let div of divsTab2; let i = index">
                        <div *ngIf = "div.DESCRIPCION || div.SECCIONES || div.TIPO_NORMATIVIDAD || div.NUMERO || div.ANIO">
                                <div class="titulo" (click)="toggleSectionDivAdd('divAdd', i)" [ngClass]="{'verde': isDivAddVisible(i)}">
                                    <div class="h3">
                                        <h3 id="tituloNormativa">{{div.TIPO_NORMATIVIDAD !== 'otro' ? div.TIPO_NORMATIVIDAD : otroValor}} {{div.NUMERO}} de {{div.ANIO}}</h3> 
                                    </div> 
                                <i class="fa-solid" [class.fa-angle-up]="isDivAddVisible(i)" [class.fa-angle-down]="!isDivAddVisible(i)"></i>
                                <button (click)="eliminarDivAdd()" class="boton-eliminar">x</button>
                                </div>
                            <div class="detalle" id="detalleAdd" *ngIf="isDivAddVisible(i)">       
                                <h2>Emitida por:</h2>
                                <p class="parrafo">Por la cual se expide la Ley General de Turismo y se dictan otras disposiciones</p>
                                <h4 style="font-weight: bolder;" class="parrafo">ARTÍCULOS / SECCIONES / REQUISITOS ESPECÍFICOS QUE APLICAN</h4>
                                <p class="parrafo">{{ div.DESCRIPCION }}</p>
                                <p class="parrafo">{{ div.SECCIONES }}</p>
                                <app-app-formulario></app-app-formulario>
                            </div> 
                        </div>  
                    </div>
                </div>
                  
                <ng-template #inputTemplate>
                    <div>
                      <input type="text" [(ngModel)]="nuevoDiv.anio">
                      <input type="text" [(ngModel)]="nuevoDiv.numero">
                      <textarea [(ngModel)]="nuevoDiv.descripcion"></textarea>
                      <textarea [(ngModel)]="nuevoDiv.secciones"></textarea>
                      <input type="text" [(ngModel)]="nuevoDiv.tipoNormatividad">
                    </div>
                </ng-template>
                             
                <div id="ContainerdetalleAdicionar">
                    <div class="adicionar" (click)="toggleSection('adicionarAmbiental')" *ngIf="getRolValue() !== 4 && getRolValue()!==5 && getRolValue()!==7">
                        <button class="adicionarBtn" id="adicionarRequisitoTurismo" [disabled]="disabledModificar==true">Adicionar requisito legal +</button>
                    </div>
                    <div class="detalleAdicionar" id="detalleAdicionarRequisito" *ngIf="adicionarVisibleAmbiental">
                        <form [formGroup]="tab2Form">
                                <label class="adicionarLabel">Categoría</label>
                                <input type="text" class="adicionarInput" id="categoriaInput" formControlName="categoria" value ="Ambiental" readonly appLetras>

                                <label class="adicionarLabel">Tipo de normatividad</label>
                                <select class="adicionarInput" id="tipoNormatividadSelect" #selectOption (change)="onSelect(selectOption.value)"
                                formControlName="tipoNormatividad">
                                    <option value="" disabled selected hidden>Seleccione una opción</option>
                                    <option value="Ley">Ley</option>
                                    <option value="Decreto">Decreto</option>
                                    <option value="Decreto Ley">Decreto Ley</option>
                                    <option value="otro">Otro</option>
                                </select>
                                <div *ngIf="selectedOption === 'otro'" class="changeOtro">
                                    <label class="adicionarLabel">Otro ¿Cuál?</label>
                                    <input type="text" class="adicionarInput" id="otroInput" (input)="onOtroInputChange($event)" appLetras>
                                </div>
                                
                                <label class="adicionarLabel">Número</label>
                                <input type="number" class="adicionarInput" id="numeroInput" formControlName="numero" appNumeros> 
                                
                                <label class="adicionarLabel">Año</label>
                                <input type="number" class="adicionarInput" id="anioInput" maxlength="4" formControlName="anio" appNumeros>
                                
                                <label class="adicionarLabel">Descripción</label>
                                <textarea style="height: 100px" class="adicionarInput" id="descripcionTextAreaAdd" formControlName="descripcion"></textarea>
                                
                                <label class="adicionarLabel">Artículos / Secciones / Requisitos específicos que aplican</label>
                                <textarea style="height: 100px" class="adicionarInput" id="seccionesTextAreaAdd" formControlName="secciones"></textarea>
                                
                                <button type="submit" class="btnAdd" (click)="agregarDiv()" [disabled]="tab2Form.invalid">Agregar</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div *ngSwitchCase="'tab3'">
            <div class="containerTabActual">
                <div class="reporte">
                    <button type="button" class="btnModificar" (click)="modificarBloquearCampos()" *ngIf="disabledModificar==false && getRolValue() !== 4 && getRolValue()!==5 && getRolValue()!==7">Modificar Reporte</button>
                    <button type="button" class="btnModificar" (click)="terminarModificarCampos()" *ngIf="disabledModificar==true">Terminar Modificación</button>
                    <button type="button" class="btnReporte" (click)="generateReporteLaboral()" [attr.disabled]="disabledModificar ? 'disabled' : null">Descargar reporte</button>
                </div>
                <div class="div" *ngFor="let campo of leyesLaboral; let i = index">
                    <div class="titulo" (click)="toggleSectionLey('primeraLey', i, campo.ID_MATRIZ)" [ngClass]="{'verde': isLeyVisible(i)}">
                        <div class="h3">
                            <h3>{{ campo.TIPO_NORMATIVIDAD }} {{ campo.NUMERO }} de {{ campo.ANIO }}</h3> 
                        </div>    
                        <div class="iconos">
                            <i class="fa-solid" [class.fa-angle-up]="isLeyVisible(i)" [class.fa-angle-down]="!isLeyVisible(i)"></i>
                        </div>
                    </div>
                    <div class="detalle" *ngIf="isLeyVisible(i)">
                        <ng-container *ngFor="let subCampo of campo.subLeyes; let j = index">
                            <div class="subdetalle">
                                <h2>Emitida por:</h2>
                                <p class="parrafo">{{campo.DESCRIPCION}}</p>
                                <h4 style="font-weight: bolder;" class="parrafo">ARTÍCULOS / SECCIONES / REQUISITOS ESPECÍFICOS QUE APLICAN</h4>
                                <p class="parrafo">{{ subCampo.DOCS_ESPECIFICOS}}</p>
                                <app-app-formulario [selectedMatrizId]="subCampo.ID_MATRIZ" [data]="subCampo" [idMatriz]="idMatriz" [showBotones]="disabledModificar"></app-app-formulario>
                            </div>
                        </ng-container>       
                    </div>
                </div>
                
                <div *ngIf="divsVisible">
                    <div class="div" id="divAdd" *ngFor="let div of divsTab3; let i = index">
                        <div *ngIf = "div.DESCRIPCION || div.SECCIONES || div.TIPO_NORMATIVIDAD || div.NUMERO || div.ANIO">
                            <div class="titulo" (click)="toggleSectionDivAdd('divAdd', i)" [ngClass]="{'verde': isDivAddVisible(i)}">
                                <div class="h3">
                                    <h3 id="tituloNormativa">{{div.TIPO_NORMATIVIDAD !== 'otro' ? div.TIPO_NORMATIVIDAD : otroValor}} {{div.NUMERO}} de {{div.ANIO}}</h3> 
                                </div> 
                                <i class="fa-solid" [class.fa-angle-up]="isDivAddVisible(i)" [class.fa-angle-down]="!isDivAddVisible(i)"></i>
                                <button (click)="eliminarDivAdd()" class="boton-eliminar">x</button>
                            </div>
                            <div class="detalle" id="detalleAdd" *ngIf="isDivAddVisible(i)">       
                                <h2>Emitida por:</h2>
                                <p class="parrafo">Por la cual se expide la Ley General de Turismo y se dictan otras disposiciones</p>
                                <h4 style="font-weight: bolder;" class="parrafo">ARTÍCULOS / SECCIONES / REQUISITOS ESPECÍFICOS QUE APLICAN</h4>
                                <p class="parrafo">{{ div.DESCRIPCION }}</p>
                                <p class="parrafo">{{ div.SECCIONES }}</p>
                                <app-app-formulario></app-app-formulario>
                            </div> 
                        </div>  
                    </div>
                </div>
                  
                <ng-template #inputTemplate>
                    <div>
                      <input type="text" [(ngModel)]="nuevoDiv.anio">
                      <input type="text" [(ngModel)]="nuevoDiv.numero">
                      <textarea [(ngModel)]="nuevoDiv.descripcion"></textarea>
                      <textarea [(ngModel)]="nuevoDiv.secciones"></textarea>
                      <input type="text" [(ngModel)]="nuevoDiv.tipoNormatividad">
                    </div>
                </ng-template>
                             
                <div id="ContainerdetalleAdicionar">
                    <div class="adicionar" (click)="toggleSection('adicionarLaboral')" *ngIf="getRolValue() !== 4 && getRolValue()!==5 && getRolValue()!==7">
                        <button class="adicionarBtn" id="adicionarRequisitoTurismo" [disabled]="disabledModificar==true">Adicionar requisito legal +</button>
                    </div>
                    <div class="detalleAdicionar" id="detalleAdicionarRequisito" *ngIf="adicionarVisibleLaboral">
                        <form [formGroup]="tab3Form">

                                <label class="adicionarLabel">Categoría</label>
                                <input type="text" class="adicionarInput" id="categoriaInput" formControlName="categoria" value ="Laboral y SGSST" readonly appLetras>
                                
                                <label class="adicionarLabel">Tipo de normatividad</label>
                                <select class="adicionarInput" id="tipoNormatividadSelect" #selectOption (change)="onSelect(selectOption.value)"
                                formControlName="tipoNormatividad">
                                    <option value="" disabled selected hidden>Seleccione una opción</option>
                                    <option value="Ley">Ley</option>
                                    <option value="Decreto">Decreto</option>
                                    <option value="Decreto Ley">Decreto Ley</option>
                                    <option value="otro">Otro</option>
                                </select>
                                <div *ngIf="selectedOption === 'otro'" class="changeOtro">
                                    <label class="adicionarLabel">Otro ¿Cuál?</label>
                                    <input type="text" class="adicionarInput" id="otroInput" (input)="onOtroInputChange($event)" appLetras>
                                </div>
                                
                                <label class="adicionarLabel">Número</label>
                                <input type="number" class="adicionarInput" id="numeroInput" formControlName="numero" appNumeros> 
                                
                                <label class="adicionarLabel">Año</label>
                                <input type="number" class="adicionarInput" id="anioInput" maxlength="4" formControlName="anio" appNumeros>
                                
                                <label class="adicionarLabel">Descripción</label>
                                <textarea style="height: 100px" class="adicionarInput" id="descripcionTextAreaAdd" formControlName="descripcion"></textarea>
                                
                                <label class="adicionarLabel">Artículos / Secciones / Requisitos específicos que aplican</label>
                                <textarea style="height: 100px" class="adicionarInput" id="seccionesTextAreaAdd" formControlName="secciones"></textarea>
                                
                                <button type="submit" class="btnAdd" (click)="agregarDiv()" [disabled]="tab3Form.invalid">Agregar</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div *ngSwitchCase="'tab4'">
            <div class="containerTabActual">
                <div class="reporte">
                    <button type="button" class="btnModificar" (click)="modificarBloquearCampos()" *ngIf="disabledModificar==false && getRolValue() !== 4 && getRolValue()!==5 && getRolValue()!==7">Modificar Reporte</button>
                    <button type="button" class="btnModificar" (click)="terminarModificarCampos()" *ngIf="disabledModificar==true">Terminar Modificación</button>
                    <button type="button" class="btnReporte" (click)="generateReporteSocial()" [attr.disabled]="disabledModificar ? 'disabled' : null">Descargar reporte</button>
                </div>
                <div class="div" *ngFor="let campo of leyesSocial; let i = index">
                    <div class="titulo" (click)="toggleSectionLey('primeraLey', i, campo.ID_MATRIZ)" [ngClass]="{'verde': isLeyVisible(i)}">
                        <div class="h3">
                            <h3>{{ campo.TIPO_NORMATIVIDAD }} {{ campo.NUMERO }} de {{ campo.ANIO }}</h3> 
                        </div>    
                        <div class="iconos">
                            <i class="fa-solid" [class.fa-angle-up]="isLeyVisible(i)" [class.fa-angle-down]="!isLeyVisible(i)"></i>
                        </div>
                    </div>
                    <div class="detalle" *ngIf="isLeyVisible(i)">
                        <ng-container *ngFor="let subCampo of campo.subLeyes; let j = index">
                            <div class="subdetalle">
                                <h2>Emitida por:</h2>
                                <p class="parrafo">{{campo.DESCRIPCION}}</p>
                                <h4 style="font-weight: bolder;" class="parrafo">ARTÍCULOS / SECCIONES / REQUISITOS ESPECÍFICOS QUE APLICAN</h4>
                                <p class="parrafo">{{ subCampo.DOCS_ESPECIFICOS}}</p>
                                <app-app-formulario [selectedMatrizId]="subCampo.ID_MATRIZ" [data]="subCampo" [idMatriz]="idMatriz" [showBotones]="disabledModificar"></app-app-formulario>
                            </div>
                        </ng-container>    
                    </div>
                </div>
                
                <div *ngIf="divsVisible">
                    <div class="div" id="divAdd" *ngFor="let div of divsTab4; let i = index">
                        <div *ngIf = "div.DESCRIPCION || div.SECCIONES || div.TIPO_NORMATIVIDAD || div.NUMERO || div.ANIO">
                            <div class="titulo" (click)="toggleSectionDivAdd('divAdd', i)" [ngClass]="{'verde': isDivAddVisible(i)}">
                                <div class="h3">
                                    <h3 id="tituloNormativa">{{div.TIPO_NORMATIVIDAD !== 'otro' ? div.TIPO_NORMATIVIDAD : otroValor}} {{div.NUMERO}} de {{div.ANIO}}</h3> 
                                </div> 
                                <i class="fa-solid" [class.fa-angle-up]="isDivAddVisible(i)" [class.fa-angle-down]="!isDivAddVisible(i)"></i>
                                <button (click)="eliminarDivAdd()" class="boton-eliminar">x</button>
                            </div>
                            <div class="detalle" id="detalleAdd" *ngIf="isDivAddVisible(i)">       
                                <h2>Emitida por:</h2>
                                <p class="parrafo">Por la cual se expide la Ley General de Turismo y se dictan otras disposiciones</p>
                                <h4 style="font-weight: bolder;" class="parrafo">ARTÍCULOS / SECCIONES / REQUISITOS ESPECÍFICOS QUE APLICAN</h4>
                                <p class="parrafo">{{ div.DESCRIPCION }}</p>
                                <p class="parrafo">{{ div.SECCIONES }}</p>
                                <app-app-formulario></app-app-formulario>
                            </div> 
                        </div>  
                    </div>
                </div>
                  
                <ng-template #inputTemplate>
                    <div>
                      <input type="text" [(ngModel)]="nuevoDiv.anio">
                      <input type="text" [(ngModel)]="nuevoDiv.numero">
                      <textarea [(ngModel)]="nuevoDiv.descripcion"></textarea>
                      <textarea [(ngModel)]="nuevoDiv.secciones"></textarea>
                      <input type="text" [(ngModel)]="nuevoDiv.tipoNormatividad">
                    </div>
                </ng-template>
                             
                <div id="ContainerdetalleAdicionar">
                    <div class="adicionar" (click)="toggleSection('adicionarSocial')" *ngIf="getRolValue() !== 4 && getRolValue()!==5 && getRolValue()!==7">
                        <button class="adicionarBtn" id="adicionarRequisitoTurismo" [disabled]="disabledModificar==true">Adicionar requisito legal +</button>
                    </div>
                    <div class="detalleAdicionar" id="detalleAdicionarRequisito" *ngIf="adicionarVisibleSocial">
                        <form [formGroup]="tab4Form">
                                <label class="adicionarLabel">Categoría</label>
                                <input type="text" class="adicionarInput" id="categoriaInput" formControlName="categoria" value ="Social" readonly appLetras>

                                <label class="adicionarLabel">Tipo de normatividad</label>
                                <select class="adicionarInput" id="tipoNormatividadSelect" #selectOption (change)="onSelect(selectOption.value)"
                                formControlName="tipoNormatividad">
                                    <option value="" disabled selected hidden>Seleccione una opción</option>
                                    <option value="Ley">Ley</option>
                                    <option value="Decreto">Decreto</option>
                                    <option value="Decreto Ley">Decreto Ley</option>
                                    <option value="otro">Otro</option>
                                </select>
                                <div *ngIf="selectedOption === 'otro'" class="changeOtro">
                                    <label class="adicionarLabel">Otro ¿Cuál?</label>
                                    <input type="text" class="adicionarInput" id="otroInput" (input)="onOtroInputChange($event)" appLetras>
                                </div>
                                
                                <label class="adicionarLabel">Número</label>
                                <input type="number" class="adicionarInput" id="numeroInput" formControlName="numero" appNumeros> 
                                
                                <label class="adicionarLabel">Año</label>
                                <input type="number" class="adicionarInput" id="anioInput" maxlength="4" formControlName="anio" appNumeros>
                                
                                <label class="adicionarLabel">Descripción</label>
                                <textarea style="height: 100px" class="adicionarInput" id="descripcionTextAreaAdd" formControlName="descripcion"></textarea>
                                
                                <label class="adicionarLabel">Artículos / Secciones / Requisitos específicos que aplican</label>
                                <textarea style="height: 100px" class="adicionarInput" id="seccionesTextAreaAdd" formControlName="secciones"></textarea>
                                
                                <button type="submit" class="btnAdd" (click)="agregarDiv()" [disabled]="tab4Form.invalid">Agregar</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div *ngSwitchCase="'tab5'">
            <div class="containerTabActual">
                <div class="reporte">
                    <button type="button" class="btnModificar" (click)="modificarBloquearCampos()" *ngIf="disabledModificar==false && getRolValue() !== 4 && getRolValue()!==5 && getRolValue()!==7">Modificar Reporte</button>
                    <button type="button" class="btnModificar" (click)="terminarModificarCampos()" *ngIf="disabledModificar==true">Terminar Modificación</button>
                    <button type="button" class="btnReporte" (click)="generateReporteEconomico()" [attr.disabled]="disabledModificar ? 'disabled' : null">Descargar reporte</button>
                </div>
                <div class="div" *ngFor="let campo of leyesEconomico; let i = index">
                    <div class="titulo" (click)="toggleSectionLey('primeraLey', i, campo.ID_MATRIZ)" [ngClass]="{'verde': isLeyVisible(i)}">
                        <div class="h3">
                            <h3>{{ campo.TIPO_NORMATIVIDAD }} {{ campo.NUMERO }} de {{ campo.ANIO }}</h3> 
                        </div>    
                        <div class="iconos">
                            <i class="fa-solid" [class.fa-angle-up]="isLeyVisible(i)" [class.fa-angle-down]="!isLeyVisible(i)"></i>
                        </div>
                    </div>
                    <div class="detalle" *ngIf="isLeyVisible(i)">
                        <ng-container *ngFor="let subCampo of campo.subLeyes; let j = index">
                            <div class="subdetalle">
                                <h2>Emitida por:</h2>
                                <p class="parrafo">{{campo.DESCRIPCION}}</p>
                                <h4 style="font-weight: bolder;" class="parrafo">ARTÍCULOS / SECCIONES / REQUISITOS ESPECÍFICOS QUE APLICAN</h4>
                                <p class="parrafo">{{ subCampo.DOCS_ESPECIFICOS}}</p>
                                <app-app-formulario [selectedMatrizId]="subCampo.ID_MATRIZ" [data]="subCampo" [idMatriz]="idMatriz" [showBotones]="disabledModificar"></app-app-formulario>
                            </div>
                        </ng-container>           
                    </div>
                </div>
                
                <div *ngIf="divsVisible">
                    <div class="div" id="divAdd" *ngFor="let div of divsTab5; let i = index">
                        <div *ngIf = "div.DESCRIPCION || div.SECCIONES || div.TIPO_NORMATIVIDAD || div.NUMERO || div.ANIO">
                            <div class="titulo" (click)="toggleSectionDivAdd('divAdd', i)" [ngClass]="{'verde': isDivAddVisible(i)}">
                                <div class="h3">
                                    <h3 id="tituloNormativa">{{div.TIPO_NORMATIVIDAD !== 'otro' ? div.TIPO_NORMATIVIDAD : otroValor}} {{div.NUMERO}} de {{div.ANIO}}</h3> 
                                </div> 
                                <i class="fa-solid" [class.fa-angle-up]="isDivAddVisible(i)" [class.fa-angle-down]="!isDivAddVisible(i)"></i>
                                <button (click)="eliminarDivAdd()" class="boton-eliminar">x</button>
                            </div>
                            <div class="detalle" id="detalleAdd" *ngIf="isDivAddVisible(i)">       
                                <h2>Emitida por:</h2>
                                <p class="parrafo">Por la cual se expide la Ley General de Turismo y se dictan otras disposiciones</p>
                                <h4 style="font-weight: bolder;" class="parrafo">ARTÍCULOS / SECCIONES / REQUISITOS ESPECÍFICOS QUE APLICAN</h4>
                                <p class="parrafo">{{ div.DESCRIPCION }}</p>
                                <p class="parrafo">{{ div.SECCIONES }}</p>
                                <app-app-formulario></app-app-formulario>
                            </div> 
                        </div>  
                    </div>
                </div>
                  
                <ng-template #inputTemplate>
                    <div>
                      <input type="text" [(ngModel)]="nuevoDiv.anio">
                      <input type="text" [(ngModel)]="nuevoDiv.numero">
                      <textarea [(ngModel)]="nuevoDiv.descripcion"></textarea>
                      <textarea [(ngModel)]="nuevoDiv.secciones"></textarea>
                      <input type="text" [(ngModel)]="nuevoDiv.tipoNormatividad">
                    </div>
                </ng-template>
                             
                <div id="ContainerdetalleAdicionar">
                    <div class="adicionar" (click)="toggleSection('adicionarEconomico')" *ngIf="getRolValue() !== 4 && getRolValue()!==5 && getRolValue()!==7">
                        <button class="adicionarBtn" id="adicionarRequisitoTurismo" [disabled]="disabledModificar==true">Adicionar requisito legal +</button>
                    </div>
                    <div class="detalleAdicionar" id="detalleAdicionarRequisito" *ngIf="adicionarVisibleEconomico">
                        <form [formGroup]="tab5Form">

                                <label class="adicionarLabel">Categoría</label>
                                <input type="text" class="adicionarInput" id="categoriaInput" formControlName="categoria" value ="Economico" readonly appLetras>

                                <label class="adicionarLabel">Tipo de normatividad</label>
                                <select class="adicionarInput" id="tipoNormatividadSelect" #selectOption (change)="onSelect(selectOption.value)"
                                formControlName="tipoNormatividad">
                                    <option value="" disabled selected hidden>Seleccione una opción</option>
                                    <option value="Ley">Ley</option>
                                    <option value="Decreto">Decreto</option>
                                    <option value="Decreto Ley">Decreto Ley</option>
                                    <option value="otro">Otro</option>
                                </select>
                                <div *ngIf="selectedOption === 'otro'" class="changeOtro">
                                    <label class="adicionarLabel">Otro ¿Cuál?</label>
                                    <input type="text" class="adicionarInput" id="otroInput" (input)="onOtroInputChange($event)" appLetras>
                                </div>
                                
                                <label class="adicionarLabel">Número</label>
                                <input type="number" class="adicionarInput" id="numeroInput" formControlName="numero" appNumeros> 
                                
                                <label class="adicionarLabel">Año</label>
                                <input type="number" class="adicionarInput" id="anioInput" maxlength="4" formControlName="anio" appNumeros>
                                
                                <label class="adicionarLabel">Descripción</label>
                                <textarea style="height: 100px" class="adicionarInput" id="descripcionTextAreaAdd" formControlName="descripcion"></textarea>
                                
                                <label class="adicionarLabel">Artículos / Secciones / Requisitos específicos que aplican</label>
                                <textarea style="height: 100px" class="adicionarInput" id="seccionesTextAreaAdd" formControlName="secciones"></textarea>
                                
                                <button type="submit" class="btnAdd" (click)="agregarDiv()" [disabled]="tab5Form.invalid">Agregar</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div *ngSwitchCase="'tab6'">
            <div class="containerTabActual">
                <div class="reporte">
                    <button type="button" class="btnModificar" (click)="modificarBloquearCampos()" *ngIf="disabledModificar==false && getRolValue() !== 4 && getRolValue()!==5 && getRolValue()!==7">Modificar Reporte</button>
                    <button type="button" class="btnModificar" (click)="terminarModificarCampos()" *ngIf="disabledModificar==true">Terminar Modificación</button>
                    <button type="button" class="btnReporte" (click)="generateReporteParticular()" [attr.disabled]="disabledModificar ? 'disabled' : null">Descargar reporte</button>
                </div>
                <div class="div" *ngFor="let campo of leyesParticular; let i = index">
                    <div class="titulo" (click)="toggleSectionLey('primeraLey', i, campo.ID_MATRIZ)" [ngClass]="{'verde': isLeyVisible(i)}">
                        <div class="h3">
                            <h3>{{ campo.TIPO_NORMATIVIDAD }} {{ campo.NUMERO }} de {{ campo.ANIO }}</h3> 
                        </div>    
                        <div class="iconos">
                            <i class="fa-solid" [class.fa-angle-up]="isLeyVisible(i)" [class.fa-angle-down]="!isLeyVisible(i)"></i>
                        </div>
                    </div>
                    <div class="detalle" *ngIf="isLeyVisible(i)">
                        <ng-container *ngFor="let subCampo of campo.subLeyes; let j = index">
                            <div class="subdetalle">
                                <h2>Emitida por:</h2>
                                <p class="parrafo">{{campo.DESCRIPCION}}</p>
                                <h4 style="font-weight: bolder;" class="parrafo">ARTÍCULOS / SECCIONES / REQUISITOS ESPECÍFICOS QUE APLICAN</h4>
                                <p class="parrafo">{{ subCampo.DOCS_ESPECIFICOS}}</p>
                                <app-app-formulario [selectedMatrizId]="subCampo.ID_MATRIZ" [data]="subCampo" [idMatriz]="idMatriz" [showBotones]="disabledModificar"></app-app-formulario>
                            </div>
                        </ng-container>  
                    </div>
                </div>
                
                <div *ngIf="divsVisible">
                    <div class="div" id="divAdd" *ngFor="let div of divsTab6; let i = index">
                        <div *ngIf = "div.DESCRIPCION || div.SECCIONES || div.TIPO_NORMATIVIDAD || div.NUMERO || div.ANIO">
                            <div class="titulo" (click)="toggleSectionDivAdd('divAdd', i)" [ngClass]="{'verde': isDivAddVisible(i)}">
                                <div class="h3">
                                    <h3 id="tituloNormativa">{{div.TIPO_NORMATIVIDAD !== 'otro' ? div.TIPO_NORMATIVIDAD : otroValor}} {{div.NUMERO}} de {{div.ANIO}}</h3> 
                                </div> 
                                <i class="fa-solid" [class.fa-angle-up]="isDivAddVisible(i)" [class.fa-angle-down]="!isDivAddVisible(i)"></i>
                                <button (click)="eliminarDivAdd()" class="boton-eliminar">x</button>
                            </div>
                            <div class="detalle" id="detalleAdd" *ngIf="isDivAddVisible(i)">       
                                <h2>Emitida por:</h2>
                                <p class="parrafo">Por la cual se expide la Ley General de Turismo y se dictan otras disposiciones</p>
                                <h4 style="font-weight: bolder;" class="parrafo">ARTÍCULOS / SECCIONES / REQUISITOS ESPECÍFICOS QUE APLICAN</h4>
                                <p class="parrafo">{{ div.DESCRIPCION }}</p>
                                <p class="parrafo">{{ div.SECCIONES }}</p>
                                <app-app-formulario></app-app-formulario>
                            </div> 
                        </div>  
                    </div>
                </div>
                  
                <ng-template #inputTemplate>
                    <div>
                      <input type="text" [(ngModel)]="nuevoDiv.anio">
                      <input type="text" [(ngModel)]="nuevoDiv.numero">
                      <textarea [(ngModel)]="nuevoDiv.descripcion"></textarea>
                      <textarea [(ngModel)]="nuevoDiv.secciones"></textarea>
                      <input type="text" [(ngModel)]="nuevoDiv.tipoNormatividad">
                    </div>
                </ng-template>
                             
                <div id="ContainerdetalleAdicionar">
                    <div class="adicionar" (click)="toggleSection('adicionarParticular')" *ngIf="getRolValue() !== 4 && getRolValue()!==5 && getRolValue()!==7">
                        <button class="adicionarBtn" id="adicionarRequisitoTurismo" [disabled]="disabledModificar==true">Adicionar requisito legal +</button>
                    </div>
                    <div class="detalleAdicionar" id="detalleAdicionarRequisito" *ngIf="adicionarVisibleParticular">
                        <form [formGroup]="tab6Form">

                                <label class="adicionarLabel">Categoría</label>
                                <input type="text" class="adicionarInput" id="categoriaParticularInput" formControlName="categoria">   

                                <label class="adicionarLabel">Tipo de normatividad</label>
                                <select class="adicionarInput" id="tipoNormatividadSelect" #selectOption (change)="onSelect(selectOption.value)"
                                formControlName="tipoNormatividad">
                                    <option value="" disabled selected hidden>Seleccione una opción</option>
                                    <option value="Ley">Ley</option>
                                    <option value="Decreto">Decreto</option>
                                    <option value="Decreto Ley">Decreto Ley</option>
                                    <option value="otro">Otro</option>
                                </select>
                                <div *ngIf="selectedOption === 'otro'" class="changeOtro">
                                    <label class="adicionarLabel">Otro ¿Cuál?</label>
                                    <input type="text" class="adicionarInput" id="otroInput" (input)="onOtroInputChange($event)" appLetras>
                                </div>
                                
                                <label class="adicionarLabel">Número</label>
                                <input type="number" class="adicionarInput" id="numeroInput" formControlName="numero" appNumeros> 
                                
                                <label class="adicionarLabel">Año</label>
                                <input type="number" class="adicionarInput" id="anioInput" maxlength="4" formControlName="anio" appNumeros>
                                
                                <label class="adicionarLabel">Descripción</label>
                                <textarea style="height: 100px" class="adicionarInput" id="descripcionTextAreaAdd" formControlName="descripcion"></textarea>
                                
                                <label class="adicionarLabel">Artículos / Secciones / Requisitos específicos que aplican</label>
                                <textarea style="height: 100px" class="adicionarInput" id="seccionesTextAreaAdd" formControlName="secciones"></textarea>
                                
                                <button type="submit" class="btnAdd" (click)="agregarDiv()" [disabled]="tab6Form.invalid">Agregar</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
  </div>
</div>
<!-- Modal Agregar Noticia -->
<div class="modal-background" id="modal-success" *ngIf="showModalResumen">
    <div class="modal-content">
        <div class="modal-title">
            <!-- <a title="Cerrar" data-dismiss="modal" aria-label="Close" class="x">
                <i id="botonX" class="fa-solid fa-circle-xmark" style="color: #06543c;font-size: 25px;"
                    (click)="showModal = false;"></i>
            </a> -->
            <h2 class="modalResumen">Agregar Resumen</h2>
            <div class="linea"></div>
        </div>
        <form [formGroup]="saveForm" class="form" (ngSubmit)="guardarTextArea()">
            
            <label for="">Descripción de modificaciones realizadas</label>
            <!-- <angular-editor placeholder="Agregar una descripción" formControlName="descripcionNoticia"
                id="descripcionNoticia" style="margin-top:2vh;"></angular-editor> -->
            <textarea id="textAreaModal" class="textAreaModal" formControlName="descripcionNoticia"></textarea>
            
            <button type="submit" class="botonG"
                [disabled]="!saveForm.controls.descripcionNoticia.value">
                <i id="idBotonResumen" class="fa-regular fa-floppy-disk" style="color: #fff;"></i>
                Guardar Resumen</button>
        </form>
    </div>
</div>



<app-modal></app-modal>
<app-app-footer></app-app-footer>
<ngx-spinner></ngx-spinner>